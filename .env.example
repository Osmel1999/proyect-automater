# Variables de Entorno - Backend WhatsApp + KDS

# ====================================
# CONFIGURACIÓN DEL SERVIDOR
# ====================================
PORT=3000
NODE_ENV=development
BASE_URL=http://localhost:3000

# ====================================
# WHATSAPP API (META) - NUEVA CONFIGURACIÓN
# ====================================
# Obtén estos valores desde: https://developers.facebook.com/apps
WHATSAPP_APP_ID=tu_app_id_aqui
WHATSAPP_APP_SECRET=tu_app_secret_aqui

# Token para verificar webhook (genera uno aleatorio)
# Genera con: node -e "console.log(require('crypto').randomBytes(20).toString('hex'))"
WHATSAPP_VERIFY_TOKEN=tu_token_de_verificacion_aleatorio

# ====================================
# CIFRADO DE DATOS
# ====================================
# Clave para cifrar tokens de acceso (mínimo 32 caracteres)
# Genera con: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
ENCRYPTION_KEY=tu_clave_de_cifrado_de_32_caracteres_minimo

# ====================================
# FACEBOOK LOGIN / EMBEDDED SIGNUP
# ====================================
FACEBOOK_APP_ID=tu_app_id_aqui
FACEBOOK_APP_SECRET=tu_app_secret_aqui
REDIRECT_URI=http://localhost:3000/api/whatsapp/callback

# ====================================
# TWILIO (DEPRECADO - Se eliminará)
# ====================================
# Estas variables ya no se usan después de migrar a WhatsApp API
# TWILIO_ACCOUNT_SID=tu_account_sid_aqui
# TWILIO_AUTH_TOKEN=tu_auth_token_aqui
# TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# ====================================
# FIREBASE
# ====================================
# URL de tu Firebase Realtime Database
FIREBASE_DATABASE_URL=https://tu-proyecto.firebaseio.com

# Service Account Key (JSON codificado en Base64)
# Para generar:
# 1. Descarga tu Service Account Key desde Firebase Console
# 2. Codifica a Base64: cat serviceAccountKey.json | base64
# 3. Pega el resultado aquí:
FIREBASE_SERVICE_ACCOUNT_KEY=tu_service_account_key_en_base64

# Alternativamente, puedes usar el archivo directamente (para desarrollo local):
# GOOGLE_APPLICATION_CREDENTIALS=/ruta/a/serviceAccountKey.json

# ID del proyecto de Firebase
FIREBASE_PROJECT_ID=tu-proyecto-firebase

# ====================================
# SERVIDOR
# ====================================
# Puerto donde correrá el servidor (Railway lo asigna automáticamente)
PORT=3000

# URL base de tu servidor (importante para los webhooks)
# Local: http://localhost:3000
# Railway: https://tu-app.up.railway.app
BASE_URL=http://localhost:3000

# ====================================
# CONFIGURACIÓN OPCIONAL
# ====================================
# Entorno de ejecución
NODE_ENV=development  # development | production

# Tiempo de expiración de sesiones (en minutos)
SESSION_TIMEOUT=30

# Activar logs detallados
DEBUG=true

# ====================================
# SISTEMA ANTI-BAN (WhatsApp)
# ====================================
# Modo de protección anti-ban para evitar que WhatsApp bloquee los bots
# Opciones:
#   - 'tunnel' (default): Usa el navegador del restaurante como proxy (GRATIS)
#   - 'proxy': Usa Bright Data con IPs residenciales/ISP (PAGO ~$0.21-0.42/restaurante)
#   - 'direct': Sin protección - usa IP de Railway (NO RECOMENDADO - RIESGO DE BAN)
ANTI_BAN_MODE=tunnel

# Tipo de proxy Bright Data (solo si ANTI_BAN_MODE=proxy)
# Opciones: 'isp', 'residential', 'datacenter'
PROXY_TYPE=isp

# ====================================
# BRIGHT DATA (Solo si ANTI_BAN_MODE=proxy)
# ====================================
# Configuración del proxy de Bright Data
# Ver docs/PROXY-ISP-IMPLEMENTACION-EXITOSA.md para más detalles
# ISP_PROXY_HOST=brd.superproxy.io
# ISP_PROXY_PORT=33335
# ISP_PROXY_USERNAME=tu_username
# ISP_PROXY_PASSWORD=tu_password
